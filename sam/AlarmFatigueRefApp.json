{"topologyName":"AlarmFatigueRefApp","config":"{\"topology.workers\":5,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":127,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx2048m\"}","sources":[{"id":21,"topologyId":3,"topologyComponentBundleId":1,"versionId":4,"name":"ReceiveDeviceEvents","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"af_kafka_1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"alarmfatiguedemo1-1304-1-0.example.com:6667","kafkaServiceName":"","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"alarmfatiguedemo1","fetchMinimumBytes":"1","consumerStartupDelayMs":60000,"sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"afeventavro","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"outputStreams":[{"id":17,"versionId":4,"streamId":"kafka_stream_1","description":null,"topologyId":3,"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":true},{"name":"PatientId","type":"INTEGER","optional":true},{"name":"PatientName","type":"STRING","optional":true},{"name":"DiagnosisDescription","type":"STRING","optional":true},{"name":"HealthProviderName","type":"STRING","optional":true},{"name":"PatLocation","type":"STRING","optional":true},{"name":"DoctorEmail","type":"STRING","optional":true},{"name":"SampleDuration","type":"INTEGER","optional":true},{"name":"Respiration","type":"INTEGER","optional":true},{"name":"PulseRate","type":"INTEGER","optional":true},{"name":"BloodPressureSystolic","type":"INTEGER","optional":true},{"name":"BloodPressureDiastolic","type":"INTEGER","optional":true},{"name":"BodyTemperature","type":"FLOAT","optional":true},{"name":"TransmissionTimestamp","type":"STRING","optional":true}],"timestamp":1508971100309}],"timestamp":1508945711652}],"sinks":[{"id":24,"topologyId":3,"topologyComponentBundleId":10,"versionId":4,"name":"StoreDeviceEventsInHDFS","description":"","config":{"properties":{"fsUrl":"hdfs://alarmfatiguedemo1-1304-1-0.example.com:8020","outputFields":["DeviceGUID","DeviceId","PatientId","PatientName","DiagnosisDescription","HealthProviderName","PatLocation","DoctorEmail","SampleDuration","Respiration","PulseRate","BloodPressureSystolic","BloodPressureDiastolic","BodyTemperature","TransmissionTimestamp"],"cluster":"1","path":"/tmp/af","extension":".txt","rotationPolicy":{"sizeBasedRotation":{"rotationSize":100,"rotationSizeUnit":"MB"}},"prefix":"","parallelism":1,"topic":"","countPolicyValue":1,"clusters":"alarmfatiguedemo1"}},"timestamp":1508971100309},{"id":25,"topologyId":3,"topologyComponentBundleId":16,"versionId":4,"name":"AlertEvent","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"FIVE_MINUTE","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"count"}},{"doublemax":{"name":"PulseRate_AVG","fieldName":"PulseRate_AVG"}},{"doublemax":{"name":"Respiration_AVG","fieldName":"Respiration_AVG"}},{"doublemax":{"name":"BloodPressureSystolic_AVG","fieldName":"BloodPressureSystolic_AVG"}},{"doublemax":{"name":"BloodPressureDiastolic_AVG","fieldName":"BloodPressureDiastolic_AVG"}},{"doublemax":{"fieldName":"BodyTemperature_AVG","name":"BodyTemperature_AVG"}}],"tranquilityZKconnect":"alarmfatiguedemo1-1304-1-0.example.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"device-event-alerts-cube","clusters":"alarmfatiguedemo1","dimensions":["DoctorEmail","DeviceGUID","HealthProviderName","PatientName","PatLocation","DeviceId"]}},"timestamp":1508971100309},{"id":26,"topologyId":3,"topologyComponentBundleId":12,"versionId":4,"name":"NotifyDoctor","description":"","config":{"properties":{"notifierName":"Email Notifier","parallelism":1,"className":"com.hortonworks.streamline.streams.notifiers.EmailNotifier","fieldValues":{"contentType":"text/plain","from":"hwx.nc.demo@gmail.com","to":"${DoctorEmail}","subject":"${PatientName} abnormal Pulse Rate of ${PulseRate_AVG}","body":"${HealthProviderName},\n\nPatient ${PatientName} in location ${PatLocation} has an abnormal Pulse Rate of ${PulseRate_AVG}. \n\nDiagnosis: ${DiagnosisDescription}\n\nOther Patient Stats:\nTemperature: ${BodyTemperature_AVG}\nRespiration: ${Respiration_AVG}\nBlood Pressure: ${BloodPressureSystolic_AVG} / ${BloodPressureDiastolic_AVG}\n"},"notificationStoreClassName":"","jarFileName":"notifiers-ab049dec-b6d8-4422-a8ce-678898b6a85a.jar","properties":{"ssl":false,"starttls":true,"debug":false,"protocol":"smtp","auth":true,"username":"hwx.nc.demo@gmail.com","password":"Hwx1234.","host":"smtp.gmail.com","port":587}}},"timestamp":1508971100309},{"id":27,"topologyId":3,"topologyComponentBundleId":16,"versionId":4,"name":"AllDeviceEventCube","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"FIVE_MINUTE","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"count"}},{"doublemax":{"fieldName":"PulseRate_AVG","name":"PulseRate_AVG"}},{"doublemax":{"fieldName":"Respiration_AVG","name":"Respiration_AVG"}},{"doublemax":{"fieldName":"BloodPressureSystolic_AVG","name":"BloodPressureSystolic_AVG"}},{"doublemax":{"fieldName":"BloodPressureDiastolic_AVG","name":"BloodPressureDiastolic_AVG"}},{"doublemax":{"fieldName":"BodyTemperature_AVG","name":"BodyTemperature_AVG"}}],"tranquilityZKconnect":"alarmfatiguedemo1-1304-1-0.example.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alarm-fatigue-all-events-cube","clusters":"alarmfatiguedemo1","dimensions":["DeviceGUID","HealthProviderName","DoctorEmail","PatientName","PatLocation","DeviceId"]}},"timestamp":1508971100309}],"processors":[{"id":22,"topologyId":3,"topologyComponentBundleId":5,"versionId":4,"name":"CheckPatientStatsOverTime","description":"","config":{"properties":{"rules":[3],"parallelism":1}},"outputStreams":[{"id":18,"versionId":4,"streamId":"window_transform_stream_4","description":null,"topologyId":3,"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}],"timestamp":1508971100309},{"id":19,"versionId":4,"streamId":"window_notifier_stream_4","description":null,"topologyId":3,"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}],"timestamp":1508971100309}],"timestamp":1508971100309},{"id":23,"topologyId":3,"topologyComponentBundleId":4,"versionId":4,"name":"CheckPulseRate_RULE","description":"","config":{"properties":{"outputStreams":[{"id":"rule_transform_stream_1","schema":{"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}]}},{"id":"rule_notifier_stream_1","schema":{"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}]}}],"rules":[6]}},"outputStreams":[{"id":20,"versionId":4,"streamId":"rule_transform_stream_1","description":null,"topologyId":3,"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}],"timestamp":1508971100309},{"id":21,"versionId":4,"streamId":"rule_notifier_stream_1","description":null,"topologyId":3,"fields":[{"name":"DeviceGUID","type":"STRING","optional":false},{"name":"DoctorEmail","type":"STRING","optional":false},{"name":"HealthProviderName","type":"STRING","optional":false},{"name":"DeviceId","type":"STRING","optional":false},{"name":"PatientName","type":"STRING","optional":false},{"name":"DiagnosisDescription","type":"STRING","optional":false},{"name":"PatLocation","type":"STRING","optional":false},{"name":"PulseRate_AVG","type":"DOUBLE","optional":false},{"name":"Respiration_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureSystolic_AVG","type":"DOUBLE","optional":false},{"name":"BloodPressureDiastolic_AVG","type":"DOUBLE","optional":false},{"name":"BodyTemperature_AVG","type":"DOUBLE","optional":false}],"timestamp":1508971100309}],"timestamp":1508971100309}],"edges":[{"id":19,"versionId":4,"topologyId":3,"fromId":21,"toId":22,"streamGroupings":[{"streamId":17,"grouping":"FIELDS","fields":["DeviceGUID","DoctorEmail","HealthProviderName","DeviceId","PatientName","DiagnosisDescription","PatLocation"]}],"timestamp":1508971100309},{"id":20,"versionId":4,"topologyId":3,"fromId":21,"toId":24,"streamGroupings":[{"streamId":17,"grouping":"SHUFFLE","fields":null}],"timestamp":1508971100309},{"id":21,"versionId":4,"topologyId":3,"fromId":22,"toId":27,"streamGroupings":[{"streamId":18,"grouping":"SHUFFLE","fields":null}],"timestamp":1508971100309},{"id":22,"versionId":4,"topologyId":3,"fromId":22,"toId":23,"streamGroupings":[{"streamId":18,"grouping":"SHUFFLE","fields":null}],"timestamp":1508971100309},{"id":23,"versionId":4,"topologyId":3,"fromId":23,"toId":26,"streamGroupings":[{"streamId":21,"grouping":"SHUFFLE","fields":null}],"timestamp":1508971100309},{"id":24,"versionId":4,"topologyId":3,"fromId":23,"toId":25,"streamGroupings":[{"streamId":20,"grouping":"SHUFFLE","fields":null}],"timestamp":1508971100309}],"rules":[{"id":6,"versionId":4,"topologyId":3,"name":"PulseRateOutOfRange","description":"Pulse Rates out of norm, for Pulse Rates > 100 or < 40","streams":["window_transform_stream_4"],"condition":"PulseRate_AVG > 100 OR PulseRate_AVG < 40","sql":"SELECT *  FROM window_transform_stream_4 WHERE PulseRate_AVG > 100 OR PulseRate_AVG < 40","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.NotifierAction","name":"notifierAction","outputStreams":["rule_notifier_stream_1"],"notifierName":"Email Notifier","outputFieldsAndDefaults":{"from":"hwx.nc.demo@gmail.com","to":"${DoctorEmail}","body":"${HealthProviderName},\n\nPatient ${PatientName} in location ${PatLocation} has an abnormal Pulse Rate of ${PulseRate_AVG}. \n\nDiagnosis: ${DiagnosisDescription}\n\nOther Patient Stats:\nTemperature: ${BodyTemperature_AVG}\nRespiration: ${Respiration_AVG}\nBlood Pressure: ${BloodPressureSystolic_AVG} / ${BloodPressureDiastolic_AVG}\n","contentType":"text/plain","subject":"${PatientName} abnormal Pulse Rate of ${PulseRate_AVG}"}},{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_1"],"transforms":[]}],"outputStreams":["rule_transform_stream_1","rule_notifier_stream_1"],"timestamp":1508971100309}],"windows":[{"id":3,"versionId":4,"topologyId":3,"name":"window_auto_generated","description":"window description auto generated","streams":["kafka_stream_1"],"window":{"windowLength":{"class":".Window$Duration","durationMs":60000},"slidingInterval":{"class":".Window$Duration","durationMs":60000},"tsField":null,"lagMs":0},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_4"],"transforms":[]}],"projections":[{"functionName":"MEAN","args":["PulseRate"],"outputFieldName":"PulseRate_AVG"},{"functionName":"MEAN","args":["Respiration"],"outputFieldName":"Respiration_AVG"},{"functionName":"MEAN","args":["BloodPressureSystolic"],"outputFieldName":"BloodPressureSystolic_AVG"},{"functionName":"MEAN","args":["BloodPressureDiastolic"],"outputFieldName":"BloodPressureDiastolic_AVG"},{"functionName":"MEAN","args":["BodyTemperature"],"outputFieldName":"BodyTemperature_AVG"},{"expr":"DeviceGUID"},{"expr":"DoctorEmail"},{"expr":"HealthProviderName"},{"expr":"DeviceId"},{"expr":"PatientName"},{"expr":"DiagnosisDescription"},{"expr":"PatLocation"}],"groupbykeys":["DeviceGUID","DoctorEmail","HealthProviderName","DeviceId","PatientName","DiagnosisDescription","PatLocation"],"outputStreams":["window_transform_stream_2","window_notifier_stream_2"],"timestamp":1508971100309}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","12":"NOTIFICATION","4":"RULE","5":"WINDOW","16":"DRUID","10":"HDFS"},"topologyEditorMetadata":{"topologyId":3,"versionId":4,"data":"{\"sources\":[{\"x\":138.5769805908203,\"y\":315.5704040527344,\"id\":21}],\"sinks\":[{\"x\":872.1694946289062,\"y\":191.60093688964844,\"id\":27},{\"x\":1272.1947021484375,\"y\":240.16629028320312,\"id\":26},{\"x\":279.1609191894531,\"y\":563.5093383789062,\"id\":24},{\"x\":1242.7998046875,\"y\":571.1775512695312,\"id\":25}],\"processors\":[{\"x\":818.4920043945312,\"y\":370.52593994140625,\"id\":23},{\"x\":441.471435546875,\"y\":136.6453857421875,\"id\":22}],\"graphTransforms\":{\"dragCoords\":[8.842663382716296,-46.56729600620952],\"zoomScale\":0.7824507787578714},\"customNames\":null}","timestamp":1508971100309}}